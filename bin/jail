#!/usr/bin/env ruby

require 'rubygems'
require 'thor'
require 'jailman'

class Jail < Thor

  desc "new [name] [directory]", "Creates a new Jail for application [name] [directory]"

  def new(name, directory)
    $stdout.puts "[JAILMAN] Creating Jail #{name}"
    jail = Jailman::Jail.new(name, directory)
    jail.create
  end

  desc "runner [name] [command]", "Run a [command] inside a Jail [name]"
  def runner(name, command)
    $stdout.puts "[JAILMAN] Running : #{command}"
    jail = Jailman::Jail.new(name)
    $stdout.puts jail.run(command)
  end

end

Jail.start(ARGV)
